cmake_minimum_required(VERSION 2.6)

SET(AttentionSegmentation_DEPS v4r_core v4r_common v4r_attention_segmentation)
v4r_check_dependencies(${AttentionSegmentation_DEPS})

if(NOT V4R_DEPENDENCIES_FOUND)
  message(***AttentionSegmentation does not meet dependencies*****)
  return()
endif()


v4r_include_directories("${CMAKE_CURRENT_SOURCE_DIR}")
v4r_include_modules(${AttentionSegmentation_DEPS})

SET(APPS_ATTENTION_SEGMENTATION 1 CACHE BOOL "App to test attention based segmentation" )
#set(SUBSYS_DEPS v4r_common_io v4r_attention_segmentation)

if(HAVE_OPENNURBS)
  v4r_include_directories(${OPENNURBS_INCLUDE_DIRS})
  list(APPEND DEP_LIBS ${OPENNURBS_LIBRARIES})
endif()

IF(APPS_ATTENTION_SEGMENTATION)
  find_package (OpenCV)
  find_package(PCL REQUIRED )
  find_package(Boost REQUIRED regex)
  
  link_directories(${PCL_LIBRARY_DIRS} ${Boost_LIBRARY_DIR})
  add_definitions(${PCL_DEFINITIONS})

  find_package(Eigen3 REQUIRED)

  include_directories(${EIGEN3_INCLUDE_DIRS} ${PCL_INCLUDE_DIRS} ${OpenCV_INCLUDE_DIRS})

  add_executable(segmentAttention segmentAttention.cpp)
  target_link_libraries(segmentAttention ${OpenCV_LIBS} ${PCL_LIBRARIES} ${SUBSYS_DEPS} ${Boost_LIBRARIES})
ENDIF(APPS_SEGMENTATION)
